!function t(e,n,o){function i(r,a){if(!n[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[r]={exports:{}};e[r][0].call(d.exports,(function(t){return i(e[r][1][t]||t)}),d,d.exports,t,e,n,o)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});const i=t("./dom"),s=t("./styles.css"),r=new WeakMap;class a extends HTMLElement{constructor(t,e){super(),this.consentData=null,this.options=t,this.consentData=e,this.appendChild(document.createComment("Absatzformat GmbH Consent Manager"));const n=this.attachShadow({mode:"closed"});r.set(this,n),console.log(r);const o=(0,i.createElement)("style",{},[s]);n.appendChild(o);const a=(0,i.createElement)("button",{class:"button show-settings"},["Einstellungen"]),c=(0,i.createElement)("button",{class:"button necessary-only"},["Nur notwendige"]),l=(0,i.createElement)("button",{class:"button accept-all"},["Alle akzeptieren"]);a.addEventListener("click",this.settingsOnClick.bind(this)),c.addEventListener("click",this.necessaryOnClick.bind(this)),l.addEventListener("click",this.acceptOnClick.bind(this));const d=this.createWrapper();d.querySelector(".content").append(this.createNoticeView()),d.querySelector(".actions").append(a,c,l),n.appendChild(d)}createNoticeView(){const t=(0,i.createElement)("div",{class:"notice"});return t.innerHTML=this.options.consentNotice,t}createSettingsView(){var t;const e=(0,i.createElement)("div",{class:"desc"});e.innerHTML="blaaa";const n=(0,i.createElement)("div",{class:"groups"});for(const e in this.options.consentGroups){const o=this.options.consentGroups[e],i=!!(null===(t=this.consentData)||void 0===t?void 0:t.cmg[e]);n.appendChild(this.createSetting(e,o,i))}return(0,i.createElement)("div",{class:"settings"},[e,n])}createSetting(t,e,n=!1){const o=(0,i.createElement)("input",{type:"checkbox",name:t,autocomplete:"off"});o.checked=n;const s=(0,i.createElement)("span",{class:"toggle"}),r=(0,i.createElement)("span",{class:"desc"},[e]),a=(0,i.createElement)("label",{class:"setting"},[o,s,r]),c=(0,i.createElement)("div");return c.appendChild(a),c}createWrapper(){const t=(0,i.createElement)("div",{class:"wrapper"});return t.insertAdjacentHTML("beforeend",'\n\t\t\t<div class="container">\n\t\t\t\t<div class="content"></div>\n\t\t\t\t<div class="actions"></div>\n\t\t\t</div>\n\t\t'),t}update(t){return o(this,void 0,void 0,(function*(){this.consentData=t,yield Promise.resolve();r.get(this).querySelectorAll('.groups input[type="checkbox"]').forEach((e=>{e.checked=!!t.cmg[e.name]}))}))}settingsOnClick(t){this.showSettings()}showSettings(){var t;const e=r.get(this),n=e.querySelector("button.show-settings");if(n){const o=(0,i.createElement)("button",{class:"button save-selection secondary"},["Auswahl speichern"]);o.addEventListener("click",this.selectionOnClick.bind(this)),n.replaceWith(o);const s=this.createSettingsView();null===(t=e.querySelector(".content .notice"))||void 0===t||t.replaceWith(s)}}selectionOnClick(t){const e=r.get(this),n={};e.querySelectorAll('.groups input[type="checkbox"]').forEach((t=>{n[t.name]=t.checked}));const o=new CustomEvent("custom-select",{detail:n});this.dispatchEvent(o)}necessaryOnClick(t){const e=new CustomEvent("deny-all");this.dispatchEvent(e)}acceptOnClick(t){const e=new CustomEvent("accept-all");this.dispatchEvent(e)}attach(t=!1){var e;this.parentNode||(t&&this.showSettings(),null===(e=document.querySelector(this.options.interfaceRootSelector))||void 0===e||e.appendChild(this))}detach(){return o(this,void 0,void 0,(function*(){if(this.parentNode){const t=r.get(this).querySelector(".container");t.classList.add("hide"),yield Promise.all(t.getAnimations().map((t=>t.finished))),this.parentNode.removeChild(this),t.classList.remove("hide")}}))}}customElements.get("consent-ui")||customElements.define("consent-ui",a),n.default=a},{"./dom":4,"./styles.css":6}],2:[function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}c((o=o.apply(t,e||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});const i=t("./ConsentStorage"),s=t("./ConsentInterface"),r=t("./dom"),a=t("./uuid"),c={interfaceRootSelector:"body",interfaceShowDelay:500,consentGroupSelector:"data-cmg",consentChangeReload:!1,whitelistUrls:[],consentGroups:{},consentNotice:"[notice]",consentLifetime:31536e3};n.default=class{constructor(t){this.consentData=null,this.options=Object.assign(Object.assign({},c),t),this.storage=new i.default,this.init()}init(){var t;if(this.consentData=this.storage.getData(),null===(t=this.options.onInit)||void 0===t||t.call(this.options.onInit,this),this.consentData){const t=(new Date).getTime(),e=1e3*this.options.consentLifetime;if(t-this.consentData.utc<=e)return void this.processScripts()}if(this.isUrlWhitelisted())return;const e=Date.now()-window.performance.timeOrigin,n=Math.max(this.options.interfaceShowDelay-e/1e3,0);setTimeout((()=>this.open()),n)}isUrlWhitelisted(){const t=window.location.toString();return this.options.whitelistUrls.indexOf(t)>=0}getBrowserLanguage(){return navigator.language}processScripts(){return o(this,void 0,void 0,(function*(){yield Promise.resolve();const t=this.options.consentGroupSelector;document.querySelectorAll(`script[${t}]`).forEach((e=>{if(!!e.getAttribute(t).split(",").filter(this.hasConsent.bind(this)).length){if(null!==e.getAttribute("data-cmp"))return void console.warn("Script possibly already executed:",(0,r.elementToString)(e));"text/plain"!==e.type.toLocaleLowerCase()&&console.warn('Script should be of type "text/plain":',(0,r.elementToString)(e));const t={};Array.from(e.attributes).forEach((e=>{t[e.name]=e.value}));const n=(0,r.createElement)("script",t,[e.innerHTML]);n.type="text/javascript",n.setAttribute("data-cmp",""),e.replaceWith(n)}}))}))}updateConsentData(t){var e,n,o;const i=Object.freeze({uid:(null===(e=this.consentData)||void 0===e?void 0:e.uid)||(0,a.default)(),utc:(new Date).getTime(),cmg:t});null===(n=this.interface)||void 0===n||n.update(i),this.consentData=i,this.storage.setData(i),null===(o=this.options.onConsent)||void 0===o||o.call(this.options.onConsent,i)}customSelect(t){this.close();const e=t.detail,n=!!this.consentData&&this.options.consentChangeReload,o={};for(const t in e)Object.prototype.hasOwnProperty.call(this.options.consentGroups,t)&&(o[t]=!!e[t]);this.updateConsentData(e),n?window.location.reload():this.processScripts()}denyAll(){this.close();const t=!!this.consentData&&this.options.consentChangeReload;this.updateConsentData({}),t&&window.location.reload()}acceptAll(){this.close();const t={};for(const e in this.options.consentGroups)t[e]=!0;this.updateConsentData(t),this.processScripts()}addScript(t,e,n){const o=n?[n]:void 0,i=(0,r.createElement)("script",e,o),s=t.join(",");i.setAttribute(this.options.consentGroupSelector,s);return!!t.filter(this.hasConsent.bind(this)).length?(i.type="text/javascript",i.setAttribute("data-cmp","")):i.type="text/plain",document.head.appendChild(i),i}hasConsent(t){var e;return!!(null===(e=this.consentData)||void 0===e?void 0:e.cmg[t])}getConsentData(){return this.consentData}open(t=!1){this.interface||(this.interface=new s.default(this.options,this.consentData),this.interface.addEventListener("accept-all",this.acceptAll.bind(this)),this.interface.addEventListener("deny-all",this.denyAll.bind(this)),this.interface.addEventListener("custom-select",this.customSelect.bind(this))),this.interface.attach(t)}close(){return o(this,void 0,void 0,(function*(){this.interface&&(yield this.interface.detach(),this.interface=void 0)}))}}},{"./ConsentInterface":1,"./ConsentStorage":3,"./dom":4,"./uuid":7}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(t="af_"){this.prefix=t}setData(t){if(this.dataValid(t)){const e=JSON.stringify(t);try{return localStorage.setItem(this.prefix+"cmd",e),!0}catch(t){console.log(t)}}return!1}getData(){const t=localStorage.getItem(this.prefix+"cmd");if(t)try{const e=JSON.parse(t);if(this.dataValid(e))return e}catch(t){console.log(t)}return null}dataValid(t){return"object"==typeof t&&"number"==typeof t.utc&&"object"==typeof t.cmg&&"string"==typeof t.uid}}},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.elementToString=n.createElement=void 0;n.createElement=(t,e,n)=>{const o=document.createElement(t);if(e)for(const t in e)o.setAttribute(t,e[t]);return n&&o.append(...n),o};n.elementToString=t=>{const e=t.cloneNode();return e.innerHTML=t.innerHTML.trim().length?"...":"",e.outerHTML}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t("./ConsentManager");window.consentManager=new o.default(window.cmOptions)},{"./ConsentManager":2}],6:[function(t,e,n){e.exports=':host{--color-primary:#e72d4b;--color-secondary:#2e3142;--color-muted:#ccc;--color-background:#fff;--border-radius:2px;--toggle-size:20px}.wrapper{position:fixed;z-index:99999;display:flex;top:0;left:0;bottom:0;right:0;padding:15px;pointer-events:none;align-items:flex-end;justify-content:center}.container{border-radius:var(--border-radius);width:800px;max-width:100%;max-height:100%;background-color:var(--color-background);box-shadow:0 0 15px 0 rgba(0,0,0,.25);pointer-events:all;display:flex;flex-direction:column;overflow:hidden;animation:fade-in ease 250ms}.container.hide{animation:fade-out ease 250ms}@keyframes fade-in{from{opacity:0;transform:translateY(15px)}}@keyframes fade-out{to{opacity:0;transform:translateY(15px)}}.content{overflow:auto;padding:15px;scrollbar-width:thin}.groups{display:flex;align-items:center;flex-wrap:wrap}.groups>div{width:100%;margin-bottom:5px}.setting{position:relative;display:inline-flex;user-select:none;align-items:center}.setting input{position:absolute;top:0;left:0;width:0;height:0;opacity:0}.setting .toggle{display:inline-block;width:calc(var(--toggle-size) * 2);height:var(--toggle-size);border-radius:var(--toggle-size);background-color:var(--color-muted);border:2px solid var(--color-muted);margin-right:15px;transition:background-color ease 150ms,border-color ease 150ms}.setting .toggle:after{content:"";display:block;width:var(--toggle-size);height:var(--toggle-size);border-radius:50%;background-color:var(--color-background);transition:transform ease 150ms}.setting input:checked~.toggle{background-color:var(--color-primary);border-color:var(--color-primary)}.setting input:focus~.toggle{outline:2px solid var(--color-secondary)}.setting input:focus:not(:focus-visible)~.toggle{outline:0}.setting input:focus-visible~.toggle{outline:2px solid var(--color-secondary)}.setting input:checked~.toggle:after{transform:translateX(100%)}.actions{padding:15px;border-top:1px solid var(--color-muted)}.button{font:inherit;font-weight:600;background:0 0;color:currentColor;border:2px solid var(--color-primary);border-radius:var(--border-radius);padding:15px 10px;user-select:none}.button:focus,.button:hover{border-color:var(--color-secondary);outline:0}.button.accept-all{background-color:var(--color-primary);color:var(--color-background)}.button.accept-all:focus,.button.accept-all:hover{background-color:var(--color-secondary)}.actions button{width:100%;margin-bottom:10px}@media (min-width:600px){.groups>div{width:50%}.actions{display:flex;align-items:stretch;justify-content:stretch}.actions button{margin-right:10px;margin-bottom:0}.actions button:last-child{margin-right:0}}'},{}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toBase62=void 0;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";n.toBase62=t=>{let e="";do{e=o[t%62]+e,t=t/62|0}while(t>0);return e};n.default=()=>{const t=(new Date).getTime();let e=(0,n.toBase62)(t);for(;e.length<32;)e+=o[62*Math.random()|0];return e}},{}]},{},[5]);